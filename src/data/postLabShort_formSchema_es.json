{
  "definitions": {
    "newConditions": {
      "type": "object",
      "required": ["conditions"],
      "properties": {
        "conditions": {
          "type": "object",
          "title": "6. Desde que le diagnosticaron COVID-19, ¿un médico le ha diagnosticado recientemente las siguientes afecciones? (Marque todas las que correspondan)",
          "properties": {
            "eye_desease": {
              "type": "boolean",
              "title": "Enfermedad ocular"
            },

            "high_bp": {
              "type": "boolean",
              "title": "Alta presión sanguínea"
            },
            "high_cholesterol": {
              "type": "boolean",
              "title": "Colesterol alto"
            },
            "stroke": {
              "type": "boolean",
              "title": "Derrame cerebral"
            },
            "heart_attack": {
              "type": "boolean",
              "title": "Ataque cardíaco"
            },

            "diabetes": {
              "type": "boolean",
              "title": "Diabetes"
            },
            "kidney_disease": {
              "title": "Nefropatía",
              "type": "boolean"
            },
            "depression": {
              "type": "boolean",
              "title": "Depresión"
            },
            "anxiety": {
              "title": "Ansiedad",
              "type": "boolean"
            },

            "other": {
              "title": "Otro",
              "type": "boolean"
            },
            "none": {
              "title": "Ninguno",
              "type": "boolean"
            },
            "no_answer": {
              "title": "Prefiero no responder",
              "type": "boolean"
            }
          },
          "dependencies": {
            "other": {
              "oneOf": [
                {
                  "properties": {
                    "other": {
                      "enum": [false]
                    }
                  }
                },
                {
                  "properties": {
                    "other": {
                      "enum": [true]
                    },
                    "other_specify": {
                      "title": "Por favor especifica:",
                      "type": "string"
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },

    "vaccine": {
      "type": "object",
      "required": ["received_vaccine"],
      "properties": {
        "received_vaccine": {
          "title": "2. ¿Ha recibido una vacuna COVID-19?",
          "type": "string",
          "uniqueItems": true,
          "enum": ["Yes", "No", "Prefer not to answer"],
          "enumNames": ["Sí", "No", "Prefiero no responder"]
        }
      },

      "dependencies": {
        "received_vaccine": {
          "oneOf": [
            {
              "properties": {
                "received_vaccine": {
                  "enum": ["No", "Prefer not to answer"]
                }
              }
            },
            {
              "required": ["reinfection"],
              "properties": {
                "received_vaccine": {
                  "enum": ["Yes"]
                },
                "reinfection": {
                  "title": "2a. ¿Experimentó una infección irruptiva con una prueba de frotis nasal positiva?",
                  "type": "string",
                  "uniqueItems": true,
                  "enum": ["Yes", "No", "Prefer not to answer"],
                  "enumNames": ["Sí", "No", "Prefiero no responder"]
                }
              }
            }
          ]
        },
        "reinfection": {
          "oneOf": [
            {
              "properties": {
                "reinfection": {
                  "enum": ["No", "Prefer not to answer"]
                }
              }
            },
            {
              "required": [],
              "properties": {
                "reinfection": {
                  "enum": ["Yes"]
                },
                "breakthrough_date": {
                  "title": "2b. ¿Cuándo se volvió a infectar con COVID-19?",
                  "type": "string"
                }
              }
            }
          ]
        }
      }
    }
  },

  "type": "object",
  "properties": {
    "newConditions": {
      "title": "",
      "$ref": "#/definitions/newConditions"
    },

    "vaccine": {
      "title": "",
      "$ref": "#/definitions/vaccine"
    }
  }
}
